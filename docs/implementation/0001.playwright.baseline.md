# Playwright Baseline Tests

## Introduction

This folder contains Playwright baseline tests which run against the sample dashboard app located in
`sample-apps/dashboard/`, which is served with and without `data-testid` attributes on key elements.

The purpose of the tests is to:

1. Assess that Playwright can test in realistic yet complicated scenarios that users would
   experience in a modern web applications
2. See if tests are hindered, complicated, flakier or more burdensome with or without `data-testid`
   attributes.

## The Sample Dashboard App

Using the following commands:

- `/workspaces/vizwright/projects/run-baseline-with-test-id.sh`
- `/workspaces/vizwright/projects/run-baseline-without-test-id.sh`

The sample dashboard app can be served in two states:

- With `data-testid` attributes on key elements for reliable selection
- Without `data-testid` attributes, relying on more complex selectors

`data-testid` selectors are the most reliable way to select elements for testing, and yet they are
rarely implemented thoroughly by development teams, citing concerns about polluting code, increasing
maintenance overhead, or even increasing risk of bot attacks. The latter is continuously disproven
as a security risk and the benefits of using test IDs outweigh the perceived risks.

In practice, the overhead of maintaining test IDs is minimal compared to the benefits of having
reliable selectors that increase the efficiency of automated testing. Build processes can strip test
IDs from production builds if desired, though many teams choose to leave them in place since they
have no functional impact on end users.

To execute the tests with data-testid attributes, run the run-baseline-tests.sh script which
executes tests and gathers results in the `with-test-id` folder.

Conversely, to test without data-testid attributes, run the run-baseline-no-test-id.sh script which
executes tests and gathers results in the `without-test-id` folder.

## Simple outcomes

Both test commands essentially behave the same, executing the same set of tests, same in a logical
sense, but differ in the actual playwright code used,due to the availability of lack of data-testid
attributes to select elements.

Essentially both test suites comprise 145 tests which pass.

This leaves the reader in a position where they can objectively compare the two approaches, assess
any additional complexity, overhead or risk.

For the purposes of this project it was clear that the amount of code and complexity increased, but
it is difficult to say if the increase is appreciable.

Rather, what it does show is that fundamentally, playwright needs many commands to achieve
completion of a simple "semantic step", i.e. advancing along a user journey in a meaningful way,
such as logging in, creating an item, deleting an item, etc.

Therefore with this baseline in mind and no clear winner in terms of complexity, the recommendation
is to use data-testid attributes wherever possible to ensure reliable selection and reduce the risk
of flakiness in tests. But we must acknowledge they do not make an app more secure, but they do have
a substanital level of convenience for test authors.

All in all, the value of Vizwright remains clear, to focus on Visual First Test Automation (VFTA) to
remove the complexity of writing and maintaining Playwright tests and requisite test data,
regardless of the presence or absence of data-testid attributes.
